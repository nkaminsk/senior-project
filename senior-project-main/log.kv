# there are three screens
windowManager:
    loginWindow:
    signupWindow:
    logDataWindow:
    displayWindow:
    editWindow:
    profileWindow:
    crideWindow:

<Label>
    font_size: 20
    
<TextInput>
    multiline :False
    font_size: 18
    size_hint: 0.4, 0.1

<MDTextField>
    required: True
    color_mode: 'accent'
    line_color_focus: 255/255, 214/255, 91/255, 1
    helper_text_mode: "on_error"

<MDFillRoundFlatButton>
    font_size: 24 
    size_hint: 0.4, 0.1

    text_color: 255/255, 214/255, 0/255, 1
    md_bg_color: 24/255, 6/255, 84/255, 1


<Content>
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"

    MDTextField:
        id: searchdestination
        hint_text: "Destination Address"

# GUI for the login window
<loginWindow>:
    email : email
    pwd : pwd
    MDFloatLayout:
        orientation: "vertical"
        size: root.width, root.height

        Image:
            id: tile_logo
            size_hint: None, None
            pos_hint: {"x" : 0.37, "top" : 1}
            size: "200dp","200dp"
            source: "KentCarpool_Logo.png"

        MDTextField:
            id : email
            hint_text: "Email"
            mode: "rectangle"
            size_hint: 0.25, 0.1
            pos_hint : {"x" : 0.2, "top" : 0.55}
        MDTextField:
            id : pwd
            hint_text: "Password"
            mode: "rectangle"
            size_hint: 0.25, 0.1
            pos_hint : {"x" : 0.54, "top" : 0.55}
        MDFillRoundFlatButton:
            text : "Create an account"            
            pos_hint : {"x" : 0.3, "top" : 0.4}
            on_release: 
                app.root.current = 'signup'
                root.manager.transition.direction = "left"
        MDFillRoundFlatButton:
            text : "LOGIN"
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.28}
            on_release: 
                root.validate()
                root.manager.transition.direction = "up"
  
# GUI for the signup window
<signupWindow>:
    name2 : name2
    email : email
    pwd : pwd
    MDFloatLayout:

        MDTextField:
            id : name2
            helper_text: 'Name'
            helper_text_mode: "persistent"
            mode:'rectangle'
            pos_hint : {"x" : 0.3, "top" : .9}
        MDTextField:
            id : email
            helper_text: 'Email'
            helper_text_mode: "persistent"
            mode:'rectangle'
            pos_hint : {"x" : 0.3, "top" : 0.65}
        MDTextField:
            id : pwd
            helper_text: 'Password'
            helper_text_mode: "persistent"
            mode:'rectangle'
            pos_hint : {"x" : 0.3, "top" : 0.4}

        MDFillRoundFlatButton:
            text : "SUBMIT"
            pos_hint : {"x" : 0.3, "top" : 0.25}
            on_press :
                root.signupbtn()
                root.manager.transition.direction = "right"

        MDFillRoundFlatButton:
            text : "GO BACK"
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.13}
            on_press :
                root.back()
                root.manager.transition.direction = "right"
  
# GUI to show validation result
<logDataWindow>:
    #info : info

    MDNavigationLayout:
            #Manages the content of the drawer
        
    #Manages the primary screen data
        ScreenManager:
            MDScreen:
                MDBoxLayout:
                    orientation: "vertical"
                    MDToolbar:
                        title: "Kent State Travel App"
                        elevation: 10
                        left_action_items: [['menu', lambda x: nav_drawer.set_state("open")]]
                    MDCard:
                        RelativeLayout:
                            MapView:
                                id: mapview
                                lat: root.latitude
                                lon: root.longitude
                                zoom: 12
                                
                         
                    MDCard:
                        MDFloatLayout:
                            orientation: "vertical"
                            ScrollView:
                                MDList:
                                    id: ride_list
                                
                                    ThreeLineIconListItem:
                                        text: "Starting Location -> Destination"
                                        secondary_text: "Estimated Ride Time"
                                        tertiary_text: "Unique Ride Identification"

                                        IconLeftWidget:
                                            icon: "language-python"
                            MDFloatingActionButtonSpeedDial:
                                data: root.data
                                root_button_anim: True
                                callback: root.speed_click
                    

        MDNavigationDrawer:
            id: nav_drawer
            orientation: "vertical"
            AnchorLayout:
                anchor_x: "left"
                size_hint_y: None
                height: avatar.height
                
                Image:
                    id: avatar
                    size_hint: None, None
                    size: "56dp", "56dp"
                    source: "KentCarpool_Logo.png"

            ScrollView:
                orientation: "vertical"
                MDList:
                    id: nav_list
                    OneLineListItem:
                        id: menuitem1
                        text: "View Profile"
                        on_release:
                            root.manager.transition.direction = "up"
                            app.root.current = 'profile_window'
                    OneLineListItem:
                        id: menuitem2
                        text: "Edit Profile"
                        on_release: 
                            root.manager.transition.direction = "up"
                            app.root.current = 'edit_window'
                    OneLineListItem:
                        id: menuitem3
                        text: "My Rides"
                        on_release: 
                            nav_drawer.set_state("close")
                            root.manager.transition.direction = "up"
                            app.root.current = 'edit_window'
                    OneLineListItem:
                        id: menuitem4
                        text: "Create Ride"
                        on_release: 
                            nav_drawer.set_state("close")
                            root.manager.transition.direction = "up"
                            app.root.current = 'edit_window'
                    OneLineListItem:
                        id: menuitem5
                        text: "Delete Ride"
                        on_release: 
                            nav_drawer.set_state("close")
                            root.manager.transition.direction = "up"
                            app.root.current = 'edit_window'
                    OneLineListItem:
                        id: menuitem6
                        text: "Find Ride"
                        on_release: 
                            nav_drawer.set_state("close")
                            root.manager.transition.direction = "up"
                            app.root.current = 'edit_window'
                    OneLineListItem:
                        id: menuitem7
                        text: "Log Out"
                        on_release: 
                            nav_drawer.set_state("close")
                            root.manager.transition.direction = "up"
                            app.root.current = 'login'
  
# GUI for pop up window
<P>:
    Label:
        text : "Please enter valid information"
        size_hint : 0.4, 0.1
        pos_hint : {"x" : 0.3, "top" : 0.8}


<displayWindow>:
    departure:departure
    MDBoxLayout:
        departure:departure
        orientation: "vertical"
        MDCard:
            MapView:
                id: displayview
                zoom: 10
        MDCard:
            departure:departure
            orientation: "vertical"
            MDLabel:
                id: token
                text: "Token:  "
                size_hint : 0.2, 0.1
                #pos_hint : {"x":0.4, "top":0.9}
            MDLabel:
                id: name
                text: "Departing: "
                multiline : False
                size_hint : 0.2, 0.1
                #pos_hint : {"x" : 0.4, "top" : 0.85}
            MDLabel:
                id: departure
                text: "Arriving: "
                size_hint : 0.2, 0.1
                #pos_hint : {"x" : 0.4, "top" : 0.7}
            MDLabel:
                id: email
                text: "Price: "
                size_hint : 0.2, 0.1
                #pos_hint : {"x" : 0.4, "top" : 0.65}
            MDLabel:
                id: estimation
                text: "Estinated Time of arrival: "
                size_hint : 0.2, 0.1
                #pos_hint : {"x" : 0.4, "top" : 0.5}
      
            Button:
                text : "GO BACK"
                #size_hint : 0.3, 0.2
                #pos_hint : {"x" : 0.35, "top" : 0.18}
                on_press :
                    root.manager.transition.direction = "down"
                    app.root.current = 'logdata'

<customRide>
    #token : token
    on_release:
        app.root.current = 'display'

<profileWindow>:
    
    MDFloatLayout:

        Label:
            text: "Name: "
            size_hint : 0.2, 0.1
            pos_hint : {"x":0.4, "top":0.9}
        Label:
            id: name
            multiline : False
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.85}
        Label:
            text: "Email: "
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.7}
        Label:
            id: email
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.65}
        Label:
            text: "Token: "
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.5}
        
        Label:
            id: token
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.45}
        

        Button:
            text : "GO BACK"
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.18}
            on_press :
                root.manager.transition.direction = "down"
                app.root.current = 'logdata'



<editWindow>:
    name2 : name2
    email : email
    pwd : pwd
    MDFloatLayout:

        Label:
            text : "NAME: "
            size_hint : 0.2, 0.1
            pos_hint : {"x":0.4, "top":0.9}
        TextInput:
            id : name2
            multiline : False
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.8}
        Label:
            text : "EMAIL: "
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.7}
        TextInput:
            id : email
            multiline : False
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.6}
        Label:
            text : "PASSWORD: "
            size_hint : 0.2, 0.1
            pos_hint : {"x" : 0.4, "top" : 0.5}
        TextInput:
            id : pwd
            multiline : False
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.4}
        Button:
            text : "GO BACK"
            size_hint : 0.3, 0.1
            pos_hint : {"x" : 0.35, "top" : 0.18}
            on_press :
                root.manager.transition.direction = "down"
                app.root.current = 'logdata'



<crideWindow>:
  
    MDFloatLayout:

        Label:
            text : "DESTINATION"
            size_hint : 0.2, 0.05
            pos_hint : {"x":0.4, "top":0.9}
        TextInput:
            id : name2
            multiline : False
            size_hint : 0.3, 0.05
            pos_hint : {"x" : 0.35, "top" : 0.85}
        Label:
            text : "RIDE PRICE"
            size_hint : 0.2, 0.05
            pos_hint : {"x" : 0.4, "top" : 0.75}
        TextInput:
            id : email
            multiline : False
            size_hint : 0.3, 0.05
            pos_hint : {"x" : 0.35, "top" : 0.7}
        Label:
            text : "WHEN TO LEAVE"
            size_hint : 0.2, 0.05
            pos_hint : {"x" : 0.4, "top" : 0.6}
        MDRaisedButton:
            id: timepick
            text: "Open time picker"
            pos_hint : {"x" : 0.4, "top" : 0.55}
            on_release: root.show_time_picker()
        #TextInput:
            #id : pwd
            #multiline : False
            #size_hint : 0.3, 0.05
            #pos_hint : {"x" : 0.35, "top" : 0.55}
        Button:
            text : "GO BACK"
            size_hint : 0.3, 0.05
            pos_hint : {"x" : 0.35, "top" : 0.2}
            on_press :
                root.manager.transition.direction = "down"
                app.root.current = 'logdata'

        Button:
            text : "CREATE RIDE"
            size_hint : 0.3, 0.05
            pos_hint : {"x" : 0.35, "top" : 0.3}
            on_press :
                root.manager.transition.direction = "down"
                app.root.current = 'logdata'